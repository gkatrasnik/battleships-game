(()=>{"use strict";const e=e=>{const t=e.name,n=e.length;let l="horizontal";const r=new Array(n).fill(t);return{name:t,length:n,lifes:r,direction:l,getDirection:()=>l,changeDirection:()=>{"horizontal"===l?l="vertical":"vertical"===l&&(l="horizontal")},hit:e=>{r[e]="hit"},isSunk:()=>r.every((e=>"hit"===e))}},t=()=>{let e=Array(10).fill(null).map((()=>Array(10).fill(null)));const t=(t,n,l)=>{if("horizontal"===l.getDirection()){t>10-l.length&&(t=10-l.length),n>9&&(n=9);for(let r=0;r<l.length;r++)if(null!=e[t+r][n])return!1}else if("vertical"===l.getDirection()){n>10-l.length&&(n=10-l.length),t>9&&(t=9);for(let r=0;r<l.length;r++)if(null!=e[t][n+r])return!1}return!0},n=()=>{for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)if("object"==typeof e[t][n]&&null!==e[t][n]&&!1===e[t][n].ship.isSunk())return!1;return!0};return{grid:e,getGrid:()=>e,placeShip:(n,l,r,i)=>{if("vertical"===i&&r.changeDirection(),t(n,l,r)){if("horizontal"===r.getDirection()){n>10-r.length&&(n=10-r.length),l>9&&(l=9);for(let t=0;t<r.length;t++)e[n+t][l]={ship:r,i:t}}else if("vertical"===r.getDirection()){l>10-r.length&&(l=10-r.length),n>9&&(n=9);for(let t=0;t<r.length;t++)e[n][l+t]={ship:r,i:t}}}else console.log(`cant place - ${r.name} -  on ${n},${l},${r.getDirection()}`)},isPlaceEmpty:t,recieveAttack:(t,l)=>{null===e[t][l]?e[t][l]="o":"object"==typeof e[t][l]&&null!==e[t][l]&&(e[t][l].ship.hit(e[t][l].i),e[t][l]="x",n()?console.log("all ships are sunk"):console.log("still floating"))},allShipsSunk:n}},n=[{name:"four",length:4},{name:"three1",length:3},{name:"three2",length:3},{name:"two1",length:2},{name:"two2",length:2},{name:"two3",length:2},{name:"one1",length:1},{name:"one2",length:1},{name:"one3",length:1},{name:"one4",length:1}],l=(t="human")=>{let l=r(n);function r(t){let n=[];for(let l=0;l<t.length;l++)n.push(e(t[l]));return n}return{getShips:()=>l,getType:()=>t,attack:(e,t,n)=>{n.recieveAttack(e,t)},changeHasTurn:()=>{hasTurn=!hasTurn},createShipsArray:r}},r=l("human"),i=(l("comp"),t(),t()),a=e({name:"four",length:4});i.placeShip(0,0,a,"horizontal"),r.attack(0,0,i),r.attack(1,0,i),r.attack(2,0,i),r.attack(3,0,i),r.attack(9,9,i),console.log(i.getGrid())})();